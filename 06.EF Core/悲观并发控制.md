# 并发控制的概念

避免多个用户同时操作资源造成的并发冲突问题。

例子：统计点击量（点赞数丢失可能影响不大，那如果是钱呢？）

# 数据库层面的两种策略

悲观策略和乐观策略。

1、什么是悲观策略？

就假定说，永远都有可能在我修改数据的时候别人也在修改这条数据。

因此在我修改的时候，我锁定这条数据，等我改完了，别人才能修改。

2、解决方法（加锁）

一般采用行锁、表锁等排他锁对资源进行锁定，确保同时只有一个使用者操作被锁定的资源。

**不同数据库加锁的SQL语法不一样**，下面以MySQL为例：

```sql
select * from book where id = 1 for update;
```

执行上面SQL语句后，这行记录就会被锁住，其他查询来的时候会被挂起，直到更新动作完成后，才释放行

锁，其他SQL语句才会被继续执行。

# 实操

由于锁是跟事务相关的，所以要通过BeginTransaction()来开启一个事务。



# 缺点

如果系统并发量很大的话，会严重影响性能。

如果使用不当的话，会导致死锁。